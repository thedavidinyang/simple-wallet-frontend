import{createRouter,createWebHistory}from"vue-router";import{setAuth}from"../stores/auth";const router=createRouter({history:createWebHistory(import.meta.env.BASE_URL),routes:[{path:"/",name:"home",component:()=>import("../views/Home.vue")},{path:"/register",name:"register",component:()=>import("../views/register.vue"),meta:{guest:!0}},{path:"/login",name:"login",component:()=>import("../views/LoginView.vue"),meta:{guest:!0}},{path:"/dashboard",name:"dashboard",component:()=>import("../views/Dashboard.vue"),meta:{requiresAuth:!0}},{path:"/signout",name:"signout",beforeEnter:(to,from,next)=>{setAuth(null),import("@pnotify/core").then((({alert:alert})=>{alert({title:"Signed Out",text:"You have been signed out successfully.",delay:1500,type:"success"})})),next({name:"login"})},meta:{requiresAuth:!0}}]});router.beforeEach(((to,from,next)=>{const isAuthenticated=!!localStorage.getItem("token");to.meta.requiresAuth&&!isAuthenticated?next({name:"login"}):to.meta.guest&&isAuthenticated?next({name:"dashboard"}):next()}));export default router;